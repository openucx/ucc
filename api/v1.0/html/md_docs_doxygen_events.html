<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UCC: Execution Engine and Events</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ucc_logo_500x30.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UCC<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Unified Collective Communications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_doxygen_events.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Execution Engine and Events </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >The execution engine is an execution context that supports event-driven network execution on the CUDA streams, CPU threads, and DPU threads. It is intended to interact with execution threads that are asynchronous (offloaded collective execution) which can be implemented on GPUs, DPUs, or remote CPUs. <br  />
</p>
<p >UCC supports triggering collective operations by library-generated and user-generated events. The library events are generated on posting or completion of operations. The user-generated events include the completion of compute or communication operations. With a combination of library-generated and user-generated events, one can build dependencies between compute and collective operations, or between the collective operations.</p>
<p >Besides the execution engine, events are key for event-driven execution. The operations on the execution engines generate events that are stored internally on the execution engines. The valid events are defined by <a class="el" href="group___u_c_c___e_v_e_n_t___d_t.html#ga49ab1738495c080498f0609d4f95c279">ucc_event_type_t</a>. If the underlying hardware doesn't support event-driven execution, the implementations can implement this with the event queues or lists.</p>
<p >The interaction between the user and library is through the UCC interfaces. <a class="el" href="group___u_c_c___e_v_e_n_t.html#ga7931ff9ed11c206de3496d3eabd505b3">ucc_ee_create</a> creates execution engines. The user or library can generate an event and post it to the execution engines using <a class="el" href="group___u_c_c___e_v_e_n_t.html#ga85b8908601b039a6c4224509388660c5">ucc_ee_set_event</a> interface. The user can wait on the events with the <a class="el" href="group___u_c_c___e_v_e_n_t.html#ga45b85646575505d259272d3ba2932312">ucc_ee_wait</a> interface. The user can get the event from the ee using ucc_ee_get_event interface and acknowledge the event with ucc_ee_ack_event interface. Once acknowledged, the library destroys the event.</p>
<p >Thread Mode: While in the UCC_THREAD_MULTIPLE mode, the execution engine and operations can be invoked from multiple threads.</p>
<p >Order: All non-triggered operations posted to the execution engine are executed in-order. However, there are no ordering guarantees between the execution engines.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Triggered Operations</h2>
<p >Triggered operations enable the posting of operations on an event. For triggered operations, the team should be configured with event-driven execution. The collection operations is defined by the interface <a class="el" href="group___u_c_c___e_v_e_n_t.html#gad839a731d1c513962d734ca29a1b5f28">ucc_collective_triggered_post</a>.</p>
<p >The operations are launched on the event. So, there is no order established by the library. If user desires an order for the triggered operations, the user should provide the tag for matching the collective operations.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Interaction between an User Thread and Event-driven UCC</h2>
<p >The figure shows the interaction between application threads and the UCC library configured with event-driven teams. In this example scenario, we assume that the UCC team are configured with two events queues - one for post operations and one for completions.</p>
<p >(1) The application initializes the collective operation when it knows the control parameters of the collective such as buffer addresses, lengths, and participants of the collective. The data need not be ready as it posts the collective operation which will be triggered on an event. For example, the event here is the completion of compute by the application.</p>
<p >(2) When the application completes the compute, it posts the UCC_EVENT_COMPUTE_COMPLETE event to the execution engine.</p>
<p >(3) The library thread polls the event queue and triggers the operations that are related to the compute event.</p>
<p >(4) The library posts the UCC_EVENT_POST_COMPLETE event to the event queue.</p>
<p >(5) On completion of the collective operation, the library posts UCC_EVENT_COLLECTIVE_COMPLETE event to the completion event queue.</p>
 <div class="image">
<img src="ucc_events.png" alt=""/>
<div class="caption">
UCC Execution Engine and Events</div></div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 17 2022 10:08:29 for UCC by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
